sudo: false
language: python
services: postgresql
python:
  - "3.8"
install:
  - pip install -r requirements.txt
before_script:
  - psql -c "CREATE DATABASE testdb;" -U postgres
  - psql -c "CREATE USER kamil WITH PASSWORD 'password';" -U postgres
  - psql -c "ALTER USER kamil WITH CREATEDB;" -U postgres
  - psql -c "GRANT ALL PRIVILEGES ON DATABASE testdb TO kamil;" -U postgres
script: pytest --cov=./
after_success:
  - codecov